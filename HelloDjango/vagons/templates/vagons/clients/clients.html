{% extends 'vagons/base.html'%}

{%block page-name%}
<style>

    #create-new-cod i{
      display: flex;
        justify-content: center;
        padding: 10px;
      color: grey;
      font-size: 70px;
    }
    .card .buttons{
      display: flex;
      align-items: center;
      justify-content: center;
    }

</style>
<h1>Наличие по клиентам</h1>


{%endblock%}


{%block content%}
 
<div class="container">
    <div class="row row-cols-1 row-cols-md-6 g-2">
        <div class="col">
            <div class="card text-center " style="width: 10rem;" id="create-new-cod">
                <div class="card-header">
                  Создать новый
                  </div>
                <div class="icon">
                    <i class="fa-solid fa-file-circle-plus"></i>
                </div>
                <div class="card-body">
                  <h5 class="card-title">{{cliend_doc.name}}</h5>
                  <p class="card-text">{{cliend_doc.description}}</p>
                  <a href="{%url 'vagons:create_client_doc' %}" class="btn btn-success">Создать</a>
                </div>
              </div>
            </div>
    </div>
</div>

<br>
<div class="container">
  {% regroup clients_docs by document_date|date:"F" as cliend_doc_mounth %}
  <table class="table table-striped">
    <thead>
      <tr  class="table-primary">
        <th scope="col">Имя</th>
        <th scope="col">Дата</th>
        <th scope="col">Описание</th>
        <th scope="col">Файл</th>
        <th scope="col">Дата загрузки</th>
      </tr>
    </thead>
    <tbody>
      {%for mounth in cliend_doc_mounth%}
      <tr>
        <td colspan="5" class="table-info">{{mounth.grouper}}</td>
      </tr>
          {%for cliend_doc in mounth.list %}
          <tr>
            <td >
              <a href="{%url 'vagons:show_client' cliend_doc.pk %}">{{cliend_doc.name}}</a>
            </td>
            <td>
              <a href="{%url 'vagons:show_client' cliend_doc.pk %}">{{cliend_doc.document_date}}</a>
            </td>
            <td>{{cliend_doc.description}}</td>
            <td>
              {%if cliend_doc.document_file%}
              <a href="{{cliend_doc.document_file.url}}">{{cliend_doc.docfile_name}}</a>
              {%endif%}
            </td>
            <td>{{cliend_doc.load_date}}</td>
          </tr>
          {%endfor%}
      {%endfor%}
    </tbody>
  </table>
</div>
  


{%endblock%}